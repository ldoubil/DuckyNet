# DuckyNet è°ƒè¯•æ¨¡å—å¼€å‘æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å¦‚ä½•ä¸º DuckyNet è°ƒè¯•çª—å£å¼€å‘è‡ªå®šä¹‰è°ƒè¯•æ¨¡å—ã€‚

---

## ğŸ“š ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ¨¡å—åŒ–æ¶æ„](#æ¨¡å—åŒ–æ¶æ„)
- [åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæ¨¡å—](#åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæ¨¡å—)
- [æ ¸å¿ƒæ¥å£å’ŒåŸºç±»](#æ ¸å¿ƒæ¥å£å’ŒåŸºç±»)
- [æ¨¡å—è‡ªåŠ¨æ³¨å†Œ](#æ¨¡å—è‡ªåŠ¨æ³¨å†Œ)
- [å†…ç½®æ¨¡å—](#å†…ç½®æ¨¡å—)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## å¿«é€Ÿå¼€å§‹

### 5 åˆ†é’Ÿåˆ›å»ºä¸€ä¸ªç®€å•æ¨¡å—

1. **åˆ›å»ºæ¨¡å—æ–‡ä»¶**

```bash
Client/UI/Debug/Modules/MyTestModule.cs
```

2. **ç¼–å†™æ¨¡å—ä»£ç **

```csharp
using UnityEngine;
using DuckyNet.Client.UI.Debug;

namespace DuckyNet.Client.UI.Debug.Modules
{
    [DebugModule("æˆ‘çš„æµ‹è¯•", "æµ‹è¯•", 100)]
    public class MyTestModule : DebugModuleBase
    {
        public override string ModuleName => "æˆ‘çš„æµ‹è¯•";
        public override string Description => "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ¨¡å—";
        public override string Category => "æµ‹è¯•";

        public override void OnGUI()
        {
            if (GUILayout.Button("ç‚¹å‡»æˆ‘"))
            {
                LogToBuffer("æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼");
            }
            
            DrawLogArea();
        }
    }
}
```

3. **è¿è¡Œæ¸¸æˆ**

æ¨¡å—ä¼šè‡ªåŠ¨æ³¨å†Œå¹¶æ˜¾ç¤ºåœ¨è°ƒè¯•çª—å£ä¸­ï¼âœ¨

---

## æ¨¡å—åŒ–æ¶æ„

### æ¶æ„æ¦‚è§ˆ

```
DebugWindow (ä¸»çª—å£)
    â”‚
    â”œâ”€â”€ DebugModuleManager (æ¨¡å—ç®¡ç†å™¨)
    â”‚       â”‚
    â”‚       â”œâ”€â”€ è‡ªåŠ¨å‘ç°æ¨¡å— (åå°„)
    â”‚       â”œâ”€â”€ æ³¨å†Œæ¨¡å—
    â”‚       â””â”€â”€ ç”Ÿå‘½å‘¨æœŸç®¡ç†
    â”‚
    â””â”€â”€ IDebugModule (æ¨¡å—æ¥å£)
            â”œâ”€â”€ DebugModuleBase (åŸºç±»)
            â”‚       â””â”€â”€ å„ç§è¾…åŠ©æ–¹æ³•
            â”‚
            â””â”€â”€ å…·ä½“æ¨¡å—å®ç°
                    â”œâ”€â”€ PlayerSpawnModule
                    â”œâ”€â”€ NetworkTestModule
                    â”œâ”€â”€ SystemInfoModule
                    â””â”€â”€ ... (è‡ªå®šä¹‰æ¨¡å—)
```

### æ–‡ä»¶ç»“æ„

```
Client/UI/
â”œâ”€â”€ DebugWindow.cs                    # ä¸»è°ƒè¯•çª—å£
â””â”€â”€ Debug/
    â”œâ”€â”€ IDebugModule.cs               # æ¨¡å—æ¥å£
    â”œâ”€â”€ DebugModuleBase.cs            # æ¨¡å—åŸºç±»
    â”œâ”€â”€ DebugModuleAttribute.cs       # æ¨¡å—ç‰¹æ€§
    â”œâ”€â”€ DebugModuleManager.cs         # æ¨¡å—ç®¡ç†å™¨
    â””â”€â”€ Modules/                      # æ¨¡å—æ–‡ä»¶å¤¹
        â”œâ”€â”€ PlayerSpawnModule.cs      # ç©å®¶ç”Ÿæˆæ¨¡å—
        â”œâ”€â”€ NetworkTestModule.cs      # ç½‘ç»œæµ‹è¯•æ¨¡å—
        â”œâ”€â”€ SystemInfoModule.cs       # ç³»ç»Ÿä¿¡æ¯æ¨¡å—
        â”œâ”€â”€ GameStateModule.cs        # æ¸¸æˆçŠ¶æ€æ¨¡å—
        â””â”€â”€ YourCustomModule.cs       # ä½ çš„è‡ªå®šä¹‰æ¨¡å—
```

---

## åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæ¨¡å—

### æ­¥éª¤ 1ï¼šç»§æ‰¿åŸºç±»

æ¨èç»§æ‰¿ `DebugModuleBase`ï¼Œå®ƒæä¾›äº†è®¸å¤šå®ç”¨æ–¹æ³•ï¼š

```csharp
using DuckyNet.Client.UI.Debug;
using UnityEngine;

namespace DuckyNet.Client.UI.Debug.Modules
{
    public class MyModule : DebugModuleBase
    {
        // å®ç°å¿…éœ€çš„å±æ€§å’Œæ–¹æ³•
    }
}
```

### æ­¥éª¤ 2ï¼šæ·»åŠ æ¨¡å—ç‰¹æ€§

ä½¿ç”¨ `[DebugModule]` ç‰¹æ€§æ ‡è®°ä½ çš„æ¨¡å—ï¼š

```csharp
[DebugModule("æ¨¡å—åç§°", "åˆ†ç±»åç§°", ä¼˜å…ˆçº§)]
public class MyModule : DebugModuleBase
{
    // ...
}
```

**å‚æ•°è¯´æ˜**ï¼š
- **æ¨¡å—åç§°**: æ˜¾ç¤ºåœ¨UIä¸Šçš„åç§°
- **åˆ†ç±»åç§°**: æ¨¡å—æ‰€å±åˆ†ç±»ï¼ˆå¦‚"è§’è‰²ç®¡ç†"ã€"ç½‘ç»œ"ç­‰ï¼‰
- **ä¼˜å…ˆçº§**: æ•°å­—è¶Šå°è¶Šé å‰æ˜¾ç¤ºï¼ˆå¯é€‰ï¼Œé»˜è®¤100ï¼‰

### æ­¥éª¤ 3ï¼šå®ç°å¿…éœ€çš„å±æ€§

```csharp
public override string ModuleName => "æˆ‘çš„æ¨¡å—";
public override string Description => "æ¨¡å—æè¿°";
public override string Category => "æˆ‘çš„åˆ†ç±»";
public override int Priority => 50;
```

### æ­¥éª¤ 4ï¼šå®ç° OnGUI æ–¹æ³•

```csharp
public override void OnGUI()
{
    // ä½¿ç”¨ Unity IMGUI ç»˜åˆ¶ç•Œé¢
    GUILayout.Label("è¿™æ˜¯ä¸€ä¸ªæ ‡ç­¾");
    
    if (GUILayout.Button("è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®"))
    {
        // æŒ‰é’®ç‚¹å‡»å¤„ç†
    }
    
    // æ˜¾ç¤ºæ—¥å¿—åŒºåŸŸ
    DrawLogArea();
}
```

### å®Œæ•´ç¤ºä¾‹

```csharp
using UnityEngine;
using DuckyNet.Client.UI.Debug;

namespace DuckyNet.Client.UI.Debug.Modules
{
    /// <summary>
    /// ç¤ºä¾‹è°ƒè¯•æ¨¡å—
    /// </summary>
    [DebugModule("ç¤ºä¾‹æ¨¡å—", "ç¤ºä¾‹", 50)]
    public class ExampleModule : DebugModuleBase
    {
        public override string ModuleName => "ç¤ºä¾‹æ¨¡å—";
        public override string Description => "å±•ç¤ºæ¨¡å—å¼€å‘çš„åŸºæœ¬åŠŸèƒ½";
        public override string Category => "ç¤ºä¾‹";
        public override int Priority => 50;

        private int _clickCount = 0;
        private string _inputText = "";

        protected override void OnInitialize()
        {
            LogToBuffer("ç¤ºä¾‹æ¨¡å—å·²åˆå§‹åŒ–");
        }

        public override void OnGUI()
        {
            // æ˜¾ç¤ºç‚¹å‡»è®¡æ•°
            GUILayout.Label($"ç‚¹å‡»æ¬¡æ•°: {_clickCount}");
            
            // æŒ‰é’®
            if (GUILayout.Button("ç‚¹å‡»æˆ‘"))
            {
                _clickCount++;
                LogToBuffer($"æŒ‰é’®è¢«ç‚¹å‡»äº† {_clickCount} æ¬¡");
            }
            
            // è¾“å…¥æ¡†
            GUILayout.BeginHorizontal();
            GUILayout.Label("è¾“å…¥:", GUILayout.Width(50));
            _inputText = GUILayout.TextField(_inputText);
            GUILayout.EndHorizontal();
            
            if (GUILayout.Button("æäº¤"))
            {
                LogToBuffer($"æäº¤äº†æ–‡æœ¬: {_inputText}");
            }
            
            // æ—¥å¿—åŒºåŸŸ
            DrawLogArea(120f);
        }

        public override void Update()
        {
            // æ¯å¸§æ›´æ–°é€»è¾‘ï¼ˆå¯é€‰ï¼‰
        }

        protected override void OnDispose()
        {
            LogToBuffer("ç¤ºä¾‹æ¨¡å—å·²æ¸…ç†");
        }
    }
}
```

---

## æ ¸å¿ƒæ¥å£å’ŒåŸºç±»

### IDebugModule æ¥å£

æ‰€æœ‰æ¨¡å—å¿…é¡»å®ç°çš„æ¥å£ï¼š

```csharp
public interface IDebugModule
{
    string ModuleName { get; }      // æ¨¡å—åç§°
    string Description { get; }     // æ¨¡å—æè¿°
    string Category { get; }        // åˆ†ç±»
    int Priority { get; }           // ä¼˜å…ˆçº§
    bool IsEnabled { get; }         // æ˜¯å¦å¯ç”¨

    void Initialize(RpcClient client);  // åˆå§‹åŒ–
    void OnGUI();                       // ç»˜åˆ¶UI
    void Update();                      // æ¯å¸§æ›´æ–°
    void Dispose();                     // æ¸…ç†èµ„æº
}
```

### DebugModuleBase åŸºç±»

æä¾›å¸¸ç”¨åŠŸèƒ½çš„åŸºç±»ï¼š

#### å¯ç”¨å±æ€§

```csharp
protected RpcClient _client;        // RPC å®¢æˆ·ç«¯å¼•ç”¨
protected string _logBuffer;        // æ—¥å¿—ç¼“å†²åŒº
```

#### å¯ç”¨æ–¹æ³•

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `LogToBuffer(string)` | è®°å½•æ—¥å¿—åˆ°æ¨¡å—ç¼“å†²åŒº |
| `ClearLogBuffer()` | æ¸…ç©ºæ—¥å¿—ç¼“å†²åŒº |
| `DrawLogArea(float height)` | ç»˜åˆ¶æ—¥å¿—æ˜¾ç¤ºåŒºåŸŸ |
| `GetHeaderStyle()` | è·å–æ ‡é¢˜æ ·å¼ |
| `GetSubHeaderStyle()` | è·å–å‰¯æ ‡é¢˜æ ·å¼ |

#### å¯é‡å†™æ–¹æ³•

| æ–¹æ³• | è¯´æ˜ | æ˜¯å¦å¿…é¡» |
|------|------|---------|
| `OnInitialize()` | æ¨¡å—åˆå§‹åŒ–æ—¶è°ƒç”¨ | å¦ |
| `OnGUI()` | ç»˜åˆ¶UIï¼ˆæ¯å¸§ï¼‰ | **æ˜¯** |
| `Update()` | é€»è¾‘æ›´æ–°ï¼ˆæ¯å¸§ï¼‰ | å¦ |
| `OnDispose()` | æ¸…ç†èµ„æº | å¦ |

---

## æ¨¡å—è‡ªåŠ¨æ³¨å†Œ

### å·¥ä½œåŸç†

1. **åå°„å‘ç°**: `DebugModuleManager` ä½¿ç”¨åå°„æ‰«æç¨‹åºé›†
2. **ç‰¹æ€§è¯†åˆ«**: æŸ¥æ‰¾å¸¦æœ‰ `[DebugModule]` ç‰¹æ€§çš„ç±»
3. **è‡ªåŠ¨å®ä¾‹åŒ–**: åˆ›å»ºæ¨¡å—å®ä¾‹
4. **ç”Ÿå‘½å‘¨æœŸç®¡ç†**: è‡ªåŠ¨è°ƒç”¨åˆå§‹åŒ–å’Œæ¸…ç†æ–¹æ³•

### DebugModuleAttribute è¯¦è§£

```csharp
[DebugModule(
    name: "æ¨¡å—åç§°",           // å¿…éœ€
    category: "åˆ†ç±»",           // å¯é€‰ï¼Œé»˜è®¤"é€šç”¨"
    priority: 100               // å¯é€‰ï¼Œé»˜è®¤100
)]
public class MyModule : DebugModuleBase
{
    // EnabledByDefault å±æ€§ï¼ˆåœ¨ç±»å†…éƒ¨è®¾ç½®ï¼‰
    // IsEnabled = true; // é»˜è®¤å¯ç”¨
}
```

### æ¡ä»¶æ³¨å†Œ

å¦‚æœæƒ³è¦æ¨¡å—é»˜è®¤ç¦ç”¨ï¼š

```csharp
[DebugModule("é«˜çº§åŠŸèƒ½", "é«˜çº§", 200, EnabledByDefault = false)]
public class AdvancedModule : DebugModuleBase
{
    // è¿™ä¸ªæ¨¡å—é»˜è®¤ä¸ä¼šåŠ è½½
}
```

---

## å†…ç½®æ¨¡å—

### 1. PlayerSpawnModule - ç©å®¶ç”Ÿæˆæ¨¡å—

**ä½ç½®**: `Client/UI/Debug/Modules/PlayerSpawnModule.cs`

**åŠŸèƒ½**:
- âœ… åˆ›å»ºæµ‹è¯•ç”¨ç©å®¶è§’è‰²
- âœ… ä¸‰ç§é¢„è®¾ï¼ˆåŸºç¡€ã€æˆ˜å£«ã€å¿«é€Ÿï¼‰
- âœ… è‡ªå®šä¹‰ä½ç½®å’Œé˜Ÿä¼
- âœ… å¿«æ·åˆ›å»ºï¼ˆä¸»è§’ä½ç½®ã€ç›¸æœºå‰æ–¹ï¼‰
- âœ… å•ä¸ªæˆ–æ‰¹é‡é”€æ¯
- âœ… æ˜¾ç¤ºå·²åˆ›å»ºå•ä½åˆ—è¡¨

**ä½¿ç”¨ç¤ºä¾‹**:
```csharp
// åœ¨ä½ çš„æ¨¡å—ä¸­å¼•ç”¨ç©å®¶ç”ŸæˆåŠŸèƒ½
var playerModule = GetModule<PlayerSpawnModule>();
```

### 2. NetworkTestModule - ç½‘ç»œæµ‹è¯•æ¨¡å—

**ä½ç½®**: `Client/UI/Debug/Modules/NetworkTestModule.cs`

**åŠŸèƒ½**:
- ğŸŒ è¿æ¥/æ–­å¼€æœåŠ¡å™¨
- ğŸ“¡ å‘é€ Ping æµ‹è¯•
- ğŸ“Š æ˜¾ç¤ºè¿æ¥çŠ¶æ€
- ğŸ”§ é…ç½®æœåŠ¡å™¨åœ°å€å’Œç«¯å£

### 3. SystemInfoModule - ç³»ç»Ÿä¿¡æ¯æ¨¡å—

**ä½ç½®**: `Client/UI/Debug/Modules/SystemInfoModule.cs`

**åŠŸèƒ½**:
- ğŸ“ˆ FPS æ˜¾ç¤ºï¼ˆå¸¦é¢œè‰²æŒ‡ç¤ºï¼‰
- ğŸ’¾ å†…å­˜ä½¿ç”¨ç›‘æ§
- ğŸ–¥ï¸ ç³»ç»Ÿä¿¡æ¯ï¼ˆUnityç‰ˆæœ¬ã€å¹³å°ã€åˆ†è¾¨ç‡ï¼‰
- ğŸ—‘ï¸ æ‰‹åŠ¨åƒåœ¾å›æ”¶

### 4. GameStateModule - æ¸¸æˆçŠ¶æ€æ¨¡å—

**ä½ç½®**: `Client/UI/Debug/Modules/GameStateModule.cs`

**åŠŸèƒ½**:
- â° æ—¶é—´ç¼©æ”¾æ§åˆ¶ï¼ˆ0x - 5xï¼‰
- â¸ï¸ å¿«æ·æš‚åœ/æ¢å¤
- â±ï¸ æ¸¸æˆæ—¶é—´å’ŒçœŸå®æ—¶é—´æ˜¾ç¤º
- ğŸ® æ»‘å—è°ƒèŠ‚

---

## æœ€ä½³å®è·µ

### 1. æ¨¡å—å‘½åè§„èŒƒ

```csharp
// âœ… å¥½çš„å‘½å
PlayerSpawnModule.cs       // æ¸…æ™°çš„åŠŸèƒ½æè¿°
NetworkDiagnosticsModule.cs

// âŒ é¿å…çš„å‘½å
Module1.cs                 // ä¸æ¸…æ¥šåŠŸèƒ½
Test.cs                    // å¤ªæ³›åŒ–
```

### 2. åˆ†ç±»ç»„ç»‡

å»ºè®®çš„åˆ†ç±»ï¼š

| åˆ†ç±»åç§° | ç”¨é€” | ç¤ºä¾‹ |
|---------|------|------|
| **è§’è‰²ç®¡ç†** | ç©å®¶ã€NPC ç›¸å…³ | PlayerSpawnModule |
| **ç½‘ç»œ** | ç½‘ç»œè°ƒè¯• | NetworkTestModule |
| **ç³»ç»Ÿ** | ç³»ç»Ÿä¿¡æ¯å’Œæ§åˆ¶ | SystemInfoModule |
| **UI** | UI è°ƒè¯• | UITestModule |
| **æ¸¸æˆç©æ³•** | æ¸¸æˆé€»è¾‘æµ‹è¯• | GameplayModule |
| **æ€§èƒ½** | æ€§èƒ½åˆ†æ | ProfilerModule |

### 3. æ—¥å¿—ä½¿ç”¨

```csharp
// âœ… å¥½çš„æ—¥å¿—å®è·µ
LogToBuffer($"[æ“ä½œ] å…·ä½“æè¿°: {å˜é‡}");
LogToBuffer($"[æˆåŠŸ] æ“ä½œå®Œæˆ");
LogToBuffer($"[é”™è¯¯] é”™è¯¯æè¿°: {ex.Message}");

// âŒ é¿å…
LogToBuffer("test");          // ä¸æ¸…æ¥š
LogToBuffer(ex.ToString());   // å¤ªå†—é•¿
```

### 4. å¼‚æ­¥æ“ä½œ

```csharp
// âœ… æ­£ç¡®å¤„ç†å¼‚æ­¥
private bool _isProcessing = false;

private async void DoAsyncOperation()
{
    if (_isProcessing) return;
    _isProcessing = true;
    
    try
    {
        await SomeAsyncMethod();
    }
    catch (Exception ex)
    {
        LogToBuffer($"[é”™è¯¯] {ex.Message}");
    }
    finally
    {
        _isProcessing = false;
    }
}

public override void OnGUI()
{
    GUI.enabled = !_isProcessing;
    if (GUILayout.Button(_isProcessing ? "å¤„ç†ä¸­..." : "å¼€å§‹"))
    {
        DoAsyncOperation();
    }
    GUI.enabled = true;
}
```

### 5. èµ„æºæ¸…ç†

```csharp
protected override void OnDispose()
{
    // æ¸…ç†åˆ›å»ºçš„å¯¹è±¡
    foreach (var obj in _createdObjects)
    {
        if (obj != null)
        {
            UnityEngine.Object.Destroy(obj);
        }
    }
    _createdObjects.Clear();
    
    LogToBuffer("èµ„æºå·²æ¸…ç†");
}
```

### 6. UI å¸ƒå±€æŠ€å·§

```csharp
public override void OnGUI()
{
    // ä½¿ç”¨ BeginHorizontal/EndHorizontal æ°´å¹³å¸ƒå±€
    GUILayout.BeginHorizontal();
    GUILayout.Label("æ ‡ç­¾:", GUILayout.Width(100));
    _value = GUILayout.TextField(_value);
    GUILayout.EndHorizontal();
    
    // ä½¿ç”¨ Space æ·»åŠ é—´è·
    GUILayout.Space(10);
    
    // ä½¿ç”¨ Box åˆ›å»ºåˆ†ç»„
    GUILayout.BeginVertical(GUI.skin.box);
    GUILayout.Label("åˆ†ç»„å†…å®¹");
    GUILayout.EndVertical();
    
    // æ¡ä»¶å¯ç”¨/ç¦ç”¨
    GUI.enabled = _canExecute;
    if (GUILayout.Button("æ‰§è¡Œ"))
    {
        // ...
    }
    GUI.enabled = true;
}
```

---

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•è®¿é—® RPC å®¢æˆ·ç«¯ï¼Ÿ

**A**: åœ¨åŸºç±»ä¸­å·²ç»æä¾›äº† `_client` å­—æ®µï¼š

```csharp
public override void OnGUI()
{
    if (_client.IsConnected)
    {
        // ä½¿ç”¨å®¢æˆ·ç«¯
    }
}
```

### Q2: å¦‚ä½•åœ¨æ¨¡å—é—´é€šä¿¡ï¼Ÿ

**A**: é€šè¿‡ `DebugModuleManager` è·å–å…¶ä»–æ¨¡å—ï¼š

```csharp
// åœ¨ DebugWindow ä¸­æ·»åŠ å…¬å…±æ–¹æ³•
public T GetModule<T>() where T : IDebugModule
{
    return _moduleManager.AllModules.OfType<T>().FirstOrDefault();
}

// åœ¨æ¨¡å—ä¸­ä½¿ç”¨
var networkModule = GetModule<NetworkTestModule>();
```

### Q3: æ¨¡å—æ²¡æœ‰è‡ªåŠ¨åŠ è½½ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç±»æ˜¯å¦ç»§æ‰¿è‡ª `IDebugModule` æˆ– `DebugModuleBase`
2. æ˜¯å¦æ·»åŠ äº† `[DebugModule]` ç‰¹æ€§
3. ç±»æ˜¯å¦æ˜¯ public çš„
4. ç±»æ˜¯å¦æ˜¯ abstract çš„ï¼ˆabstractç±»ä¸ä¼šè¢«åŠ è½½ï¼‰
5. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼Œç¡®è®¤æ¨¡å—å‘ç°è¿‡ç¨‹

### Q4: å¦‚ä½•è°ƒè¯•æ¨¡å—ä»£ç ï¼Ÿ

**A**: ä½¿ç”¨ Unity çš„ Debug.Logï¼š

```csharp
protected override void OnInitialize()
{
    UnityEngine.Debug.Log($"[{ModuleName}] åˆå§‹åŒ–å¼€å§‹");
    LogToBuffer("æ¨¡å—å·²åˆå§‹åŒ–");
    UnityEngine.Debug.Log($"[{ModuleName}] åˆå§‹åŒ–å®Œæˆ");
}
```

### Q5: OnGUI æ¯å¸§éƒ½ä¼šè°ƒç”¨å—ï¼Ÿ

**A**: æ˜¯çš„ï¼ŒOnGUI åœ¨æ¯å¸§çš„ GUI æ¸²æŸ“é˜¶æ®µè°ƒç”¨ï¼Œæ‰€ä»¥ï¼š
- âœ… é€‚åˆç»˜åˆ¶ UI
- âŒ ä¸é€‚åˆæ‰§è¡Œè€—æ—¶æ“ä½œ
- âŒ ä¸é€‚åˆä¿®æ”¹æ¸¸æˆçŠ¶æ€ï¼ˆé™¤éé€šè¿‡æŒ‰é’®ç­‰äº‹ä»¶è§¦å‘ï¼‰

### Q6: å¦‚ä½•åˆ›å»ºå­æ–‡ä»¶å¤¹ç»„ç»‡æ¨¡å—ï¼Ÿ

**A**: ç›´æ¥åˆ›å»ºå­æ–‡ä»¶å¤¹å³å¯ï¼Œåå°„ä¼šæ‰«ææ‰€æœ‰ç±»ï¼š

```
Modules/
â”œâ”€â”€ Character/
â”‚   â”œâ”€â”€ PlayerSpawnModule.cs
â”‚   â””â”€â”€ NPCSpawnModule.cs
â”œâ”€â”€ Network/
â”‚   â”œâ”€â”€ NetworkTestModule.cs
â”‚   â””â”€â”€ LatencyModule.cs
â””â”€â”€ System/
    â”œâ”€â”€ SystemInfoModule.cs
    â””â”€â”€ GameStateModule.cs
```

### Q7: å¦‚ä½•è®¾ç½®æ¨¡å—çš„é»˜è®¤å¯ç”¨çŠ¶æ€ï¼Ÿ

**A**: ä½¿ç”¨ç‰¹æ€§çš„ `EnabledByDefault` å±æ€§ï¼š

```csharp
// é»˜è®¤ç¦ç”¨
[DebugModule("é«˜çº§åŠŸèƒ½", "é«˜çº§", EnabledByDefault = false)]
public class AdvancedModule : DebugModuleBase { }

// é»˜è®¤å¯ç”¨ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰
[DebugModule("åŸºç¡€åŠŸèƒ½", "åŸºç¡€")]
public class BasicModule : DebugModuleBase { }
```

---

## é«˜çº§ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šå¸¦çŠ¶æ€ä¿å­˜çš„æ¨¡å—

```csharp
[DebugModule("é…ç½®æµ‹è¯•", "ç³»ç»Ÿ", 60)]
public class ConfigModule : DebugModuleBase
{
    private bool _autoSave = true;
    private int _saveInterval = 60;
    
    protected override void OnInitialize()
    {
        // åŠ è½½ä¿å­˜çš„è®¾ç½®
        _autoSave = PlayerPrefs.GetInt("Debug_AutoSave", 1) == 1;
        _saveInterval = PlayerPrefs.GetInt("Debug_SaveInterval", 60);
    }
    
    public override void OnGUI()
    {
        _autoSave = GUILayout.Toggle(_autoSave, "è‡ªåŠ¨ä¿å­˜");
        
        GUILayout.BeginHorizontal();
        GUILayout.Label("ä¿å­˜é—´éš”:", GUILayout.Width(100));
        string intervalStr = GUILayout.TextField(_saveInterval.ToString());
        if (int.TryParse(intervalStr, out int interval))
        {
            _saveInterval = interval;
        }
        GUILayout.EndHorizontal();
        
        if (GUILayout.Button("ä¿å­˜è®¾ç½®"))
        {
            SaveSettings();
        }
    }
    
    private void SaveSettings()
    {
        PlayerPrefs.SetInt("Debug_AutoSave", _autoSave ? 1 : 0);
        PlayerPrefs.SetInt("Debug_SaveInterval", _saveInterval);
        PlayerPrefs.Save();
        LogToBuffer("[è®¾ç½®] å·²ä¿å­˜");
    }
    
    protected override void OnDispose()
    {
        SaveSettings();
    }
}
```

### ç¤ºä¾‹ 2ï¼šå¸¦å®šæ—¶å™¨çš„æ¨¡å—

```csharp
[DebugModule("æ€§èƒ½ç›‘æ§", "æ€§èƒ½", 70)]
public class PerformanceModule : DebugModuleBase
{
    private float _updateInterval = 1f;
    private float _lastUpdateTime = 0f;
    private float _fps = 0f;
    
    public override void Update()
    {
        if (Time.time - _lastUpdateTime >= _updateInterval)
        {
            _fps = 1.0f / Time.deltaTime;
            _lastUpdateTime = Time.time;
        }
    }
    
    public override void OnGUI()
    {
        var style = new GUIStyle(GUI.skin.label);
        style.normal.textColor = _fps >= 50 ? Color.green : Color.red;
        GUILayout.Label($"FPS: {_fps:F1}", style);
    }
}
```

---

## æ€»ç»“

é€šè¿‡æ¨¡å—åŒ–ç³»ç»Ÿï¼Œä½ å¯ä»¥ï¼š

âœ… **å¿«é€Ÿå¼€å‘** - ç»§æ‰¿åŸºç±»ï¼Œå®ç° OnGUIï¼Œå®Œæˆï¼
âœ… **è‡ªåŠ¨ç®¡ç†** - æ¨¡å—è‡ªåŠ¨å‘ç°å’Œæ³¨å†Œ
âœ… **ç‹¬ç«‹æµ‹è¯•** - æ¯ä¸ªæ¨¡å—ç‹¬ç«‹è¿è¡Œï¼Œäº’ä¸å¹²æ‰°
âœ… **æ˜“äºç»´æŠ¤** - åˆ†ç±»ç»„ç»‡ï¼Œæ¸…æ™°çš„æ–‡ä»¶ç»“æ„
âœ… **å¯æ‰©å±•** - éšæ—¶æ·»åŠ æ–°æ¨¡å—ï¼Œæ— éœ€ä¿®æ”¹ä¸»çª—å£

å¼€å§‹åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªè°ƒè¯•æ¨¡å—å§ï¼ğŸš€

---

